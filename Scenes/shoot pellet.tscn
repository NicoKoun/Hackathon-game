[gd_scene load_steps=5 format=3 uid="uid://b4wtbbyg0o1tt"]

[ext_resource type="Texture2D" uid="uid://o4saecs1br00" path="res://Sprites/Pumpkin with Attack.png" id="1_vc27w"]

[sub_resource type="GDScript" id="GDScript_rqy3j"]
script/source = "extends Area2D

const SPEED = 125
var velocity = Vector2()
var direction
var hurtdir = 1
var angle

@onready var player = get_node(\"../../player/player\")

func _ready():
	angle = player.position.angle_to_point(self.position)
	print(player.position.angle_to_point(self.position))

func _physics_process(delta):
	#if (player.position.angle_to_point(self.position) < angle):
		#angle -= 0.1
	#elif (player.position.angle_to_point(self.position) > angle):
		#angle += 0.1
	#angle = player.position.angle_to_point(self.position)
	velocity.x = SPEED * delta * cos(angle) * -1
	velocity.y = SPEED * delta * sin(angle) * -1
	translate(velocity)
	
	

func _on_visible_on_screen_notifier_2d_screen_exited():
	queue_free()




func _on_body_entered(body):
	if body.is_in_group(\"gamer\"):
		if body.invince == false:
			body.gethurt()
			Game.playerHP -= 4
			queue_free()


func collide_with_wall(body: TileMap) -> void:
	#maybe check if physics mask is 3
	queue_free()


func _on_timer_timeout() -> void:
	angle = player.position.angle_to_point(self.position)


func _on_end_timer_timeout() -> void:
	print(\"dsfjkajsfkl;dasf;\")
	$Timer.stop()
"

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_s7uxr"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_14snf"]
size = Vector2(9, 9)

[node name="shoot pellet" type="Area2D"]
script = SubResource("GDScript_rqy3j")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
material = SubResource("CanvasItemMaterial_s7uxr")
position = Vector2(-0.5, 0.5)
shape = SubResource("RectangleShape2D_14snf")

[node name="Sprite" type="Sprite2D" parent="."]
position = Vector2(-0.5000005, 0.49999952)
scale = Vector2(0.28124997, 0.28125)
texture = ExtResource("1_vc27w")
hframes = 2
vframes = 2
frame = 3

[node name="VisibleOnScreenNotifier2D" type="VisibleOnScreenNotifier2D" parent="."]
position = Vector2(-0.5, 0.5)
scale = Vector2(0.45, 0.45)

[node name="Timer" type="Timer" parent="."]
wait_time = 0.1
autostart = true

[node name="endTimer" type="Timer" parent="."]
one_shot = true
autostart = true

[connection signal="body_entered" from="." to="." method="collide_with_wall"]
[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="screen_exited" from="VisibleOnScreenNotifier2D" to="." method="_on_visible_on_screen_notifier_2d_screen_exited"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="timeout" from="endTimer" to="." method="_on_end_timer_timeout"]
